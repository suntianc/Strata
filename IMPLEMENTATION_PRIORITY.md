# 功能实现优先级和工作量评估

## ✅ 已完成功能

1. ✅ 数据持久化 (localStorage)
2. ✅ Profile 保存功能
3. ✅ LLM 配置和测试
4. ✅ 清理演示数据
5. ✅ 移除无用按钮

---

## 🚨 紧急缺失功能 (阻塞用户使用)

### 1. 添加项目/任务的 + 按钮 [高优先级]

**工作量**: 中等 (2-3小时)
**影响**: 🔴 严重 - 用户无法创建新项目
**复杂度**: ⭐⭐⭐

**需要修改的文件**:
- `components/Sidebar.tsx` - 添加 + 按钮和输入框
- `App.tsx` - 添加 handleAddProject, handleAddTask, handleDeleteProject 等方法
- `types.ts` - 可能需要扩展 TaskNode 类型

**实现步骤**:
1. 在 Sidebar "DEEP STRATA" 标题旁添加 + 图标
2. 点击后显示内联输入框
3. 输入项目名称后按 Enter 创建
4. 在每个项目 hover 时显示 + 按钮添加子任务
5. 数据自动保存到 localStorage

---

### 2. 自定义标签输入 [高优先级]

**工作量**: 中等 (2-3小时)
**影响**: 🟡 中等 - 用户体验受限
**复杂度**: ⭐⭐⭐⭐

**需要修改的文件**:
- `components/MessageStream.tsx` - 修改输入区域UI
- 添加标签管理组件

**实现步骤**:
1. 在消息输入框下方添加标签区域
2. 添加 "+ Add Tag" 按钮
3. 点击后显示输入框
4. 支持 # 快捷输入
5. 显示已有标签建议
6. 可以删除已添加的标签

---

## 📊 中等优先级功能

### 3. 文件上传功能 [中优先级]

**工作量**: 大 (4-6小时)
**影响**: 🟡 中等 - 附件功能不完整
**复杂度**: ⭐⭐⭐⭐⭐

**技术挑战**:
- 文件读取和存储 (base64 或 IndexedDB)
- 大文件处理
- 文件类型验证
- 预览功能

**建议**: 先实现简单版本 (小文件 base64 存储)

---

### 4. 右键菜单功能 [中优先级]

**工作量**: 中等 (3-4小时)
**影响**: 🟢 轻微 - 有其他操作方式
**复杂度**: ⭐⭐⭐

**功能包括**:
- 重命名项目/任务
- 删除项目/任务
- 更改状态
- 归档

---

## 💎 锦上添花功能

### 5. 拖拽排序 [低优先级]

**工作量**: 大 (6-8小时)
**影响**: 🟢 轻微 - 可以手动调整
**复杂度**: ⭐⭐⭐⭐⭐

**需要引入库**: react-beautiful-dnd

**建议**: 暂时跳过,等基础功能完善后再实现

---

## 📅 推荐实施顺序

基于用户反馈和工作量,建议按以下顺序实施:

### Sprint 1 (今天) - 核心功能修复
1. **添加项目/任务按钮** ⏱️ 2-3h
   - 实现添加项目功能
   - 实现添加子任务功能
   - 数据持久化

2. **自定义标签输入** ⏱️ 2-3h
   - 基础标签添加/删除
   - 标签显示UI
   - 与 Deposit 按钮集成

**总时长**: ~4-6 小时

---

### Sprint 2 (明天) - 增强用户体验
3. **文件上传 (简化版)** ⏱️ 3-4h
   - 小文件上传 (< 5MB)
   - Base64 存储
   - 基础文件类型检测

4. **右键菜单** ⏱️ 2-3h
   - 重命名功能
   - 删除功能
   - 状态切换

**总时长**: ~5-7 小时

---

### Sprint 3 (未来) - 高级功能
5. **标签自动完成**
6. **文件预览**
7. **拖拽排序**
8. **批量操作**

---

## 🎯 快速修复方案 (临时方案)

如果时间紧迫,可以先实现以下临时方案:

### 方案 A: 最小可用版本 (1-2小时)
1. ✅ 在 Sidebar 添加简单的 + 按钮
2. ✅ 弹出 prompt() 输入项目名称
3. ✅ 在消息输入框添加逗号分隔的标签输入

**优点**: 快速实现,用户可以立即使用
**缺点**: 用户体验一般

### 方案 B: 完整实现 (4-6小时)
1. ✅ 完整的内联输入UI
2. ✅ 标签管理界面
3. ✅ 文件上传基础功能

**优点**: 用户体验好
**缺点**: 开发时间较长

---

## 💬 给用户的建议

**现状说明**:
目前 Strata 的核心架构已经完成,包括:
- ✅ 数据持久化
- ✅ AI 对话功能
- ✅ 消息管理
- ✅ 项目/任务展示

**缺失功能**:
- ❌ 添加项目/任务的 UI
- ❌ 标签输入 UI
- ❌ 文件上传 UI
- ❌ 右键菜单

**临时解决方案**:
1. **添加项目**: 可以通过修改 `INITIAL_TASKS` 数组手动添加
2. **添加标签**: 可以在代码中预设标签列表
3. **添加文件**: 可以先不上传,用文件名占位

**完整方案**:
建议按上述 Sprint 1 -> Sprint 2 的顺序逐步实现。

---

## 📝 决策建议

**如果用户说**:
- "我需要快速能用" → 实施方案 A (1-2h)
- "我要完整功能" → 实施方案 B (4-6h)
- "我先自己测试" → 提供临时解决方案文档

**建议给用户**:
"我建议先实现 Sprint 1 的两个核心功能(添加项目/任务 + 自定义标签),预计 4-6 小时。这样您就可以正常使用 Strata 的所有核心功能了。其他功能可以后续逐步完善。"

---

**文档版本**: 1.0
**创建时间**: 2025-12-11
**状态**: 等待用户决策
